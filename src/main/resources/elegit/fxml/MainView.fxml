<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>
<?import elegit.*?>
<?import org.controlsfx.control.NotificationPane?>
<?import java.net.URL?>
<?import javafx.scene.image.*?>

<?import javafx.scene.text.Font?>
<AnchorPane
        fx:controller="elegit.SessionController"
        xmlns:fx="http://javafx.com/fxml"
        prefWidth="1200"
        prefHeight="650">

    <NotificationPane fx:id="notificationPane"
            AnchorPane.bottomAnchor="5.0"
            AnchorPane.leftAnchor="5.0"
            AnchorPane.rightAnchor="5.0"
            AnchorPane.topAnchor="5.0">
        <content>
            <HBox fx:id="root">

                <VBox   spacing="10"
                        HBox.hgrow="ALWAYS">


                    <StackPane>
                        <HBox spacing="5">
                            <ComboBox id="repoDropdown"
                                      fx:id="repoDropdownSelector"
                                      onAction="#loadSelectedRepo"/>

                            <Button fx:id="openRepoDirButton"
                                    onAction="#openRepoDirectory"/>

                            <Button fx:id="loadNewRepoButton"
                                    onAction="#handleLoadNewRepoButton">
                                <contextMenu>
                                    <ContextMenu fx:id="newRepoOptionsMenu">
                                        <items>
                                            <MenuItem fx:id="cloneOption"
                                                      onAction="#handleCloneNewRepoOption"
                                                      text="Clone repository"/>
                                            <MenuItem fx:id="existingOption"
                                                      onAction="#handleLoadExistingRepoOption"
                                                      text="Load existing repository"/>
                                        </items>
                                    </ContextMenu>
                                </contextMenu>
                            </Button>
                            <Button id="warningButton"
                                    onAction="#chooseRecentReposToDelete"
                                    fx:id="removeRecentReposButton"/>
                            <Button fx:id="changeLoginButton"
                                    text="Change login"
                                    onAction="#handleChangeLoginButton" />

                            <Button text="Legend"
                                    fx:id="legendbutton"
                                    onAction="#showLegend" />

                            <Button fx:id="gitStatusButton"
                                    text="git status"
                                    id="codeButton"
                                    onAction="#onGitStatusButton"/>
                        </HBox>
                    </StackPane>


                    <GridPane   hgap="10" vgap="10"
                                id="gridPane">
                        <columnConstraints>
                            <ColumnConstraints/>
                            <ColumnConstraints/>
                            <ColumnConstraints/>
                            <ColumnConstraints/>
                            <ColumnConstraints/>
                            <ColumnConstraints/>
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints/>
                            <RowConstraints/>
                            <RowConstraints/>
                            <RowConstraints/>
                            <RowConstraints/>
                        </rowConstraints>


                        <VBox   GridPane.rowIndex="1"
                                GridPane.columnIndex="0"
                                alignment="TOP_CENTER">
                            <Text   text="Local Repository">
                                <font>
                                    <Font   size="25"/>
                                </font>
                            </Text>
                            <HBox   alignment="CENTER">
                                <Text   text="local branch: "/>
                                <Text   fx:id="currentLocalBranchText"/>
                            </HBox>
                            <HBox   alignment="CENTER">
                                <Text   text="remote-tracking branch: "/>
                                <Text   fx:id="currentRemoteTrackingBranchText"/>
                            </HBox>
                            <HBox   alignment="CENTER">
                                <Text   text="Status: "/>
                                <Text   fx:id="branchStatusText"/>
                            </HBox>
                        </VBox>


                        <VBox   alignment="TOP_CENTER"
                                GridPane.columnIndex="4"
                                GridPane.rowIndex="1">
                            <Text text="Remote Repository">
                                <font>
                                    <Font size="25"/>
                                </font>
                            </Text>
                            <HBox   alignment="TOP_CENTER">
                                <Text   fx:id="needToFetch"/>
                            </HBox>
                        </VBox>


                        <VBox   GridPane.rowIndex="2"
                                GridPane.columnIndex="4"
                                spacing="10">
                            <StackPane  alignment="TOP_CENTER">
                                <StackPane  alignment="TOP_CENTER">
                                    <ImageView
                                            fx:id = "remoteImage"
                                            fitHeight="175"
                                            fitWidth="175"
                                            preserveRatio="true">
                                        <Image url="@cloud.png"/>
                                    </ImageView>
                                </StackPane>
                                <StackPane  GridPane.rowIndex="2"
                                            GridPane.columnIndex="4"
                                            alignment="TOP_CENTER"
                                            onMouseClicked="#handleRemoteMouseClick">
                                    <padding>
                                        <Insets top="60"/>
                                    </padding>
                                    <Text fx:id="browserText"
                                          onMouseClicked="#handleRemoteMouseClick">
                                        <font>
                                            <Font size="12"/>
                                        </font>
                                    </Text>
                                </StackPane>
                            </StackPane>
                            <StackPane>
                                <Text text="No commit selected"/>
                                <GridPane alignment="TOP_CENTER"
                                          hgap="5"
                                          vgap="5"
                                          prefWidth="250"
                                          prefHeight="300"
                                          fx:id="commitInfoPane"
                                          id="gridPane">
                                    <Label GridPane.rowIndex="0"
                                           GridPane.columnIndex="0"
                                           GridPane.columnSpan="3"
                                           GridPane.halignment="CENTER"
                                           fx:id="commitInfoAuthorText"/>
                                    <Label GridPane.rowIndex="1"
                                           GridPane.columnIndex="0"
                                           GridPane.columnSpan="3"
                                           GridPane.halignment="CENTER"
                                           fx:id="commitInfoDateText"/>
                                    <Label GridPane.rowIndex="2"
                                           GridPane.columnIndex="1"
                                           GridPane.halignment="CENTER"
                                           fx:id="commitInfoNameText"/>
                                    <TextArea GridPane.rowIndex="3"
                                              GridPane.columnIndex="0"
                                              GridPane.columnSpan="3"
                                              GridPane.vgrow="ALWAYS"
                                              prefColumnCount="4"
                                              wrapText="true"
                                              editable="false"
                                              prefWidth="230"
                                              prefHeight="130"
                                              fx:id="commitInfoMessageText"/>
                                    <ScrollPane
                                            GridPane.columnIndex="1"
                                            GridPane.rowIndex="4"
                                            GridPane.columnSpan="3"
                                            fx:id="tagsPane"/>
                                    <Label
                                            GridPane.columnIndex="0"
                                            GridPane.rowIndex="4"
                                            GridPane.halignment="CENTER"
                                            fx:id="tagsLabel"
                                            text="Tags:"/>
                                    <TextArea
                                            GridPane.rowIndex="5"
                                            GridPane.columnIndex="1"
                                            GridPane.columnSpan="2"
                                            GridPane.vgrow="NEVER"
                                            prefHeight="30"
                                            prefWidth="170"
                                            prefRowCount="1"
                                            wrapText="true"
                                            fx:id="tagNameField"
                                            promptText="tag..." />
                                    <ArrowButton GridPane.rowIndex="5"
                                                 GridPane.columnIndex="0"
                                                 GridPane.halignment="LEFT"
                                                 GridPane.valignment="BOTTOM"
                                                 id="codeButton"
                                                 fx:id="tagButton"
                                                 text="Tag"
                                                 arrowLeft="true"
                                                 onAction="#handleTagButton"/>
                                    <Button GridPane.rowIndex="2"
                                            GridPane.columnIndex="0"
                                            fx:id="commitInfoGoToButton"
                                            onAction="#handleGoToCommitButton"/>
                                    <Button GridPane.rowIndex="2"
                                            GridPane.columnIndex="2"
                                            GridPane.hgrow="NEVER"
                                            fx:id="commitInfoNameCopyButton"
                                            onAction="#handleCommitNameCopyButton"/>
                                </GridPane>
                            </StackPane>
                        </VBox>


                        <VBox spacing="10"
                              alignment="TOP_CENTER"
                              GridPane.vgrow="ALWAYS"
                              GridPane.rowIndex="2"
                              GridPane.columnIndex="0">
                            <TabPane VBox.vgrow="ALWAYS">
                                <Tab text="Working Tree"
                                     closable="false"
                                     fx:id="workingTreePanelTab">
                                    <VBox   spacing="10">
                                        <WorkingTreePanelView fx:id="workingTreePanelView"/>
                                        <HBox   spacing="20"
                                                alignment="CENTER">
                                            <Button GridPane.rowIndex="2"
                                                    GridPane.columnIndex="1"
                                                    GridPane.valignment="TOP"
                                                    id="codeButton"
                                                    fx:id="addButton"
                                                    text="Add"
                                                    onAction="#handleAddButton"/>
                                            <Button GridPane.rowIndex="2"
                                                    GridPane.columnIndex="1"
                                                    GridPane.valignment="BOTTOM"
                                                    id="codeButton"
                                                    fx:id="removeButton"
                                                    text="Remove"
                                                    onAction="#handleRemoveButton"/>
                                        </HBox>
                                    </VBox>
                                </Tab>
                                <Tab text="All Files"
                                     closable="false"
                                     fx:id="allFilesPanelTab">
                                    <AllFilesPanelView fx:id="allFilesPanelView"/>
                                </Tab>
                            </TabPane>
                            <HBox spacing="20"
                                  alignment="center" >
                                <Button fx:id="selectAllButton"
                                        text="Select All"
                                        onAction="#onSelectAllButton"/>
                                <Button fx:id="deselectAllButton"
                                        text="Deselect All"
                                        onAction="#onDeselectAllButton"/>
                            </HBox>
                            <Button text="Create/delete a branch"
                                    onAction="#handleNewBranchButton"/>
                            <Button text="Checkout different branch"
                                    onAction="#showBranchCheckout"/>
                        </VBox>


                        <VBox   GridPane.columnIndex="3"
                                GridPane.rowIndex="1"
                                alignment="TOP_CENTER"
                                spacing="35">
                            <ArrowButton id="codeButton"
                                         fx:id="fetchButton"
                                         text="Fetch"
                                         arrowLeft="true"
                                         onAction="#handleFetchButton"/>
                            <ArrowButton id="codeButton"
                                         fx:id="pushButton"
                                         text="Push"
                                         arrowRight="true"
                                         onAction="#handlePushButton"/>
                        </VBox>


                        <VBox   GridPane.rowIndex="1"
                                GridPane.columnIndex="1"
                                spacing="35">
                            <ArrowButton id="codeButton"
                                         fx:id="commitButton"
                                         text="Commit"
                                         arrowRight="true"
                                         onAction="#handleCommitButton"/>
                            <Button text="Merge"
                                    onAction="#handleGeneralMergeButton"/>
                        </VBox>


                        <StackPane  GridPane.rowIndex="2"
                                    GridPane.columnIndex="2"
                                    GridPane.hgrow="ALWAYS">
                            <CommitTreePanelView fx:id="commitTreePanelView"/>
                            <StackPane.margin>
                                <Insets bottom="15.0" left="5.0"/>
                            </StackPane.margin>
                        </StackPane>


                        <StackPane GridPane.rowIndex="4"
                                   GridPane.columnIndex="0">
                            <ArrowButton StackPane.alignment="CENTER_RIGHT"
                                         id="codeButton"
                                         fx:id="pushTagsButton"
                                         text="Push Tags"
                                         arrowUp="true"
                                         arrowRight="true"
                                         visible="false"
                                         onAction="#handlePushTagsButton"/>
                        </StackPane>


                    </GridPane>
                </VBox>
            </HBox>
        </content>
    </NotificationPane>
    <stylesheets>
        <URL value="@../css/BaseStyle.css"/>
    </stylesheets>
</AnchorPane>
