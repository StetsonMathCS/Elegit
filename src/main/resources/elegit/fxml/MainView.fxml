<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Text?>
<?import elegit.*?>
<?import org.controlsfx.control.NotificationPane?>
<?import java.net.URL?>
<?import javafx.scene.image.*?>

<?import javafx.scene.text.Font?>
<AnchorPane
        fx:controller="elegit.SessionController"
        xmlns:fx="http://javafx.com/fxml"
        prefWidth="1200"
        prefHeight="650">

    <NotificationPane fx:id="notificationPane"
            AnchorPane.bottomAnchor="5.0"
            AnchorPane.leftAnchor="5.0"
            AnchorPane.rightAnchor="5.0"
            AnchorPane.topAnchor="5.0">
        <content>
            <HBox fx:id="root">
                <GridPane HBox.hgrow="ALWAYS"
                          alignment="TOP_CENTER"
                          hgap="5" vgap="5"
                          gridLinesVisible="false"
                          id="gridPane">

                    <columnConstraints>
                        <ColumnConstraints/>
                        <ColumnConstraints/>
                        <ColumnConstraints/>
                        <ColumnConstraints/>
                        <ColumnConstraints/>
                        <ColumnConstraints hgrow="ALWAYS"/>
                    </columnConstraints>

                    <rowConstraints>
                        <RowConstraints/>
                        <RowConstraints/>
                        <RowConstraints vgrow="ALWAYS"/>
                        <RowConstraints/>
                        <RowConstraints vgrow="ALWAYS"/>
                    </rowConstraints>

                    <StackPane GridPane.rowIndex="0"
                                GridPane.columnIndex="0">
                        <GridPane hgap="5" vgap="5">

                            <ComboBox GridPane.rowIndex="0"
                                      GridPane.columnIndex="0"
                                      GridPane.hgrow="ALWAYS"
                                      id="repoDropdown"
                                      fx:id="repoDropdownSelector"
                                      onAction="#loadSelectedRepo"/>

                            <Button GridPane.rowIndex="0"
                                    GridPane.columnIndex="1"
                                    GridPane.halignment="RIGHT"
                                    fx:id="openRepoDirButton"
                                    onAction="#openRepoDirectory"/>

                            <Button GridPane.rowIndex="0"
                                    GridPane.columnIndex="2"
                                    GridPane.halignment="RIGHT"
                                    fx:id="loadNewRepoButton"
                                    onAction="#handleLoadNewRepoButton">
                                <contextMenu>
                                    <ContextMenu fx:id="newRepoOptionsMenu">
                                        <items>
                                            <MenuItem fx:id="cloneOption"
                                                      onAction="#handleCloneNewRepoOption"
                                                      text="Clone repository"/>
                                            <MenuItem fx:id="existingOption"
                                                      onAction="#handleLoadExistingRepoOption"
                                                      text="Load existing repository"/>
                                        </items>
                                    </ContextMenu>
                                </contextMenu>
                            </Button>

                            <Button GridPane.rowIndex="0"
                                    GridPane.columnIndex="3"
                                    GridPane.halignment="RIGHT"
                                    id="warningButton"
                                    onAction="#chooseRecentReposToDelete"
                                    fx:id="removeRecentReposButton"/>

                        </GridPane>
                    </StackPane>

                    <Text   GridPane.columnIndex="2"
                            GridPane.rowIndex="0"
                            text="Checkout:"
                            GridPane.halignment="RIGHT"/>

                    <ComboBox fx:id="branchDropdownSelector"
                              GridPane.columnIndex="3"
                              GridPane.rowIndex="0"
                              onMouseClicked="#updateBranchDropdown"/>

                    <Button GridPane.columnIndex="4"
                            GridPane.rowIndex="0"
                            text="Manage branches"
                            fx:id="branchesButton"
                            onAction="#showBranchCheckout" />

                    <HBox   GridPane.columnIndex="5"
                            GridPane.rowIndex="0"
                            spacing="4.0">

                        <Button fx:id="changeLoginButton"
                                text="Change login"
                                onAction="#handleChangeLoginButton" />

                        <Button text="Legend"
                                fx:id="legendbutton"
                                onAction="#showLegend" />

                    </HBox>

            <GridPane alignment="TOP_CENTER"
                              hgap="10"
                              vgap="10"
                              GridPane.vgrow="ALWAYS"
                              GridPane.rowIndex="1"
                              GridPane.columnIndex="0"
                              GridPane.rowSpan="3">

                        <Button GridPane.columnIndex="0"
                                GridPane.rowIndex="0"
                                fx:id="gitStatusButton"
                                text="git status"
                                id="codeButton"
                                onAction="#onGitStatusButton"/>

                        <TabPane GridPane.rowIndex="1"
                                 GridPane.vgrow="ALWAYS">
                            <Tab text="Working Tree"
                                 closable="false"
                                 fx:id="workingTreePanelTab">
                                <WorkingTreePanelView fx:id="workingTreePanelView"/>
                            </Tab>
                            <Tab text="All Files"
                                 closable="false"
                                 fx:id="allFilesPanelTab">
                                <AllFilesPanelView fx:id="allFilesPanelView"/>
                            </Tab>
                        </TabPane>

                        <HBox GridPane.columnIndex="0"
                              GridPane.rowIndex="2"
                              spacing="20"
                              alignment="center" >

                            <Button fx:id="selectAllButton"
                                    text="Select All"
                                    onAction="#onSelectAllButton"/>

                            <Button fx:id="deselectAllButton"
                                    text="Deselect All"
                                    onAction="#onDeselectAllButton"/>
                        </HBox>

                        <TextArea
                                GridPane.rowIndex="3"
                                fx:id="commitMessageField"
                                prefRowCount="4"
                                prefColumnCount="1"
                                promptText="Commit message..."
                                wrapText="true" />

                    </GridPane>

                    <Button GridPane.columnIndex="0"
                            GridPane.rowIndex="7"
                            text="Create/delete a branch"
                            onAction="#handleNewBranchButton"/>

                    <Button GridPane.columnIndex="0"
                            GridPane.rowIndex="8"
                            text="Checkout different branch"
                            onAction="#showBranchCheckout"/>

                    <Button GridPane.columnIndex="0"
                            GridPane.rowIndex="9"
                            text="MERGE"
                            onAction="#handleGeneralMergeButton"/>

                    <StackPane GridPane.rowIndex="1"
                               GridPane.columnIndex="7">
                        <padding>
                            <Insets bottom="40"/>
                        </padding>
                        <Text text="Remote"
                              StackPane.alignment="BOTTOM_CENTER">
                            <font>
                                <Font size="26"/>
                            </font>
                        </Text>
                    </StackPane>

                    <StackPane GridPane.rowIndex="1"
                               GridPane.columnIndex="7"
                               onMouseClicked="#handleRemoteMouseClick">
                        <ImageView
                                fx:id = "remoteImage"
                                fitHeight="175"
                                fitWidth="175"
                                preserveRatio="true"
                                onMouseClicked="#handleRemoteMouseClick">
                            <image>
                                <Image url="@cloud.png"/>
                            </image>
                        </ImageView>

                        <Text fx:id="browserText"
                              onMouseClicked="#handleRemoteMouseClick">
                            <font>
                                <Font size="12" name="Sans Serif"/>
                            </font>
                        </Text>
                    </StackPane>

                    <StackPane GridPane.rowIndex="1"
                                GridPane.columnIndex="6">

                        <ArrowButton StackPane.alignment="CENTER"
                                     id="codeButton"
                                     fx:id="fetchButton"
                                     text="Fetch"
                                     arrowLeft="true"
                                     onAction="#handleFetchButton"/>
                    </StackPane>


                    <StackPane GridPane.rowIndex="1"
                               GridPane.columnIndex="2"
                               GridPane.rowSpan="1"
                               GridPane.columnSpan="4">
                        <CommitTreePanelView fx:id="remoteCommitTreePanelView"/>

                        <Label StackPane.alignment="BOTTOM_LEFT"
                               text="Remote-Tracking"
                               id="commitTreeLabel">
                            <StackPane.margin>
                                <Insets bottom="15.0" left="5.0"/>
                            </StackPane.margin>
                        </Label>
                    </StackPane>

                    <StackPane GridPane.rowIndex="2"
                               GridPane.columnIndex="5">

                        <ArrowButton StackPane.alignment="CENTER_RIGHT"
                                     id="codeButton"
                                     fx:id="pushTagsButton"
                                     text="Push Tags"
                                     arrowUp="true"
                                     arrowRight="true"
                                     visible="false"
                                     onAction="#handlePushTagsButton">
                        </ArrowButton>

                        <ArrowButton StackPane.alignment="CENTER_RIGHT"
                                     id="codeButton"
                                     fx:id="pushButton"
                                     text="Push"
                                     arrowUp="true"
                                     arrowRight="true"
                                     onAction="#handlePushButton"/>
                    </StackPane>

                    <StackPane  GridPane.rowIndex="3"
                                GridPane.columnIndex="2"
                                GridPane.rowSpan="1"
                                GridPane.columnSpan="4">
                        <CommitTreePanelView fx:id="localCommitTreePanelView"/>

                        <Label StackPane.alignment="BOTTOM_LEFT"
                               text="Local"
                               id="commitTreeLabel">
                            <StackPane.margin>
                                <Insets bottom="15.0" left="5.0"/>
                            </StackPane.margin>
                        </Label>
                    </StackPane>

                    <ArrowButton GridPane.rowIndex="3"
                                 GridPane.columnIndex="1"
                                 GridPane.halignment="CENTER"
                                 id="codeButton"
                                 fx:id="commitButton"
                                 text="Commit"
                                 arrowRight="true"
                                 onAction="#handleCommitButton"/>

                    <StackPane GridPane.rowIndex="3"
                               GridPane.columnIndex="6"
                               GridPane.columnSpan="2">
                        <Text text="No commit selected"/>
                        <GridPane alignment="TOP_CENTER"
                                  hgap="5" vgap="5"
                                  id="gridPane">

                            <Label GridPane.rowIndex="0"
                                   GridPane.columnIndex="0"
                                   GridPane.columnSpan="3"
                                   GridPane.halignment="CENTER"
                                   GridPane.hgrow="ALWAYS"
                                   fx:id="commitInfoAuthorText"/>

                            <Label GridPane.rowIndex="1"
                                   GridPane.columnIndex="0"
                                   GridPane.columnSpan="3"
                                   GridPane.halignment="CENTER"
                                   fx:id="commitInfoDateText"/>

                            <Label GridPane.rowIndex="2"
                                   GridPane.columnIndex="1"
                                   GridPane.halignment="CENTER"
                                   textOverrun="ELLIPSIS"
                                   fx:id="commitInfoNameText"/>

                            <TextArea GridPane.rowIndex="3"
                                      GridPane.columnIndex="0"
                                      GridPane.columnSpan="3"
                                      GridPane.vgrow="ALWAYS"
                                      prefColumnCount="4"
                                      wrapText="true"
                                      editable="false"
                                      fx:id="commitInfoMessageText"/>

                            <ScrollPane
                                    GridPane.columnIndex="1"
                                    GridPane.rowIndex="4"
                                    GridPane.columnSpan="3"
                                    fx:id="tagsPane"
                            />

                            <Label
                                    GridPane.columnIndex="0"
                                    GridPane.rowIndex="4"
                                    GridPane.halignment="CENTER"
                                    fx:id="tagsLabel"
                                    text="Tags:"
                            />

                            <TextArea
                                    GridPane.rowIndex="5"
                                    GridPane.columnIndex="1"
                                    GridPane.columnSpan="2"
                                    GridPane.vgrow="NEVER"
                                    prefColumnCount="1"
                                    prefHeight="1"
                                    wrapText="true"
                                    editable="true"
                                    fx:id="tagNameField"
                                    promptText="tag..." />


                            <ArrowButton GridPane.rowIndex="5"
                                         GridPane.columnIndex="0"
                                         GridPane.halignment="LEFT"
                                         GridPane.valignment="BOTTOM"
                                         id="codeButton"
                                         fx:id="tagButton"
                                         text="Tag"
                                         arrowLeft="true"
                                         onAction="#handleTagButton"/>

                            <Button GridPane.rowIndex="2"
                                    GridPane.columnIndex="0"
                                    GridPane.hgrow="ALWAYS"
                                    fx:id="commitInfoGoToButton"
                                    onAction="#handleGoToCommitButton"/>

                            <Button GridPane.rowIndex="2"
                                    GridPane.columnIndex="2"
                                    GridPane.hgrow="NEVER"
                                    fx:id="commitInfoNameCopyButton"
                                    onAction="#handleCommitNameCopyButton"/>

                        </GridPane>
                    </StackPane>
                </GridPane>
            </HBox>
        </content>
    </NotificationPane>
    <stylesheets>
        <URL value="@../css/BaseStyle.css"/>
    </stylesheets>
</AnchorPane>
